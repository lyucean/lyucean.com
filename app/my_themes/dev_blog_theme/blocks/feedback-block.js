jQuery(document).ready(function ($) {
    const postId = $('#postIdHidden').val();

    // –§—Ä–∞–∑—ã –¥–ª—è "–î–∞" –∏ "–ù–µ—Ç"
    const yesMessages = [
        "–í–æ—Ç —ç—Ç–æ –¥–∞! –¢—ã –ø—Ä–æ—Å—Ç–æ –æ–≥–æ–Ω—å! üî•",
        "–ù—É —Ç—ã –≤–æ–æ–±—â–µ –∫—Ä–∞—Å–∞–≤—á–∏–∫ (–∫—Ä–∞—Å–æ—Ç–∫–∞), —Å–ø–∞—Å–∏–±–æ! üòé",
        "–¢—ã —Å–¥–µ–ª–∞–ª –º–æ–π –¥–µ–Ω—å, —Å–ø–∞—Å–∏–±–æ, –±—Ä–æ! ‚ù§Ô∏è",
        "–í–æ—Ç —Ç–∞–∫ –¥–µ—Ä–∂–∞—Ç—å! –¢—ã —Ç–æ–ø—á–∏–∫! üí™",
        "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –Ω–µ –ø—Ä–æ—à—ë–ª –º–∏–º–æ, —Ç—ã –ª—É—á—à–∏–π! üåü",
        "–¢—ã - —Ç–æ—Ç —Å–∞–º—ã–π —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π —Å–ø–∞—Å–∞–µ—Ç –º–∏—Ä! ü¶∏‚Äç‚ôÇÔ∏è",
        "–¢—ã –ø—Ä–æ—Å—Ç–æ –ª–µ–≥–µ–Ω–¥–∞, —Å–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É! üèÜ",
        "–° —Ç–∞–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —è –Ω–∞–ø–∏—à—É –∫–Ω–∏–≥—É! üìö",
        "–¢—ã –º–æ–π –≥–µ—Ä–æ–π, —Å–ø–∞—Å–∏–±–æ! ü¶∏‚Äç‚ôÄÔ∏è",
        "–£—Ä–∞! –¢—ã —Å–¥–µ–ª–∞–ª —ç—Ç–æ—Ç –º–∏—Ä —á—É—Ç—å –ª—É—á—à–µ! üéâ"
    ];

    const noMessages = [
        "–ù—É —á—Ç–æ, –Ω–µ –∑–∞—à–ª–æ? –ü–æ–π–¥—É –≥—Ä—É—Å—Ç–∏—Ç—å –≤ —É–≥–æ–ª... üò¢",
        "–û–∫–µ–π, —Å–ø–∞—Å–∏–±–æ, —è —É—á—Ç—É!",
        "–ù—É —Ç—ã –ø—Ä–∏–¥–∏—Ä—á–∏–≤, –Ω–æ —è —Ü–µ–Ω—é —á–µ—Å—Ç–Ω–æ—Å—Ç—å!",
        "–ü–æ–Ω—è–ª, –ø—Ä–∏–Ω—è–ª, –±—É–¥—É —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ —Å–æ–±–æ–π! üíº",
        "–¢—ã —Å—É—Ä–æ–≤, –Ω–æ —è —É—Å–ª—ã—à–∞–ª! –°–ø–∞—Å–∏–±–æ –∑–∞ —Ñ–∏–¥–±—ç–∫! ‚öñÔ∏è",
        "–≠—Ö,... —è —É—á—Ç—É —Ç–≤–æ–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è! ü§î",
        "–ù—É —Ç—ã –¥–∞—ë—à—å! –õ–∞–¥–Ω–æ, —è —É—Å–ª—ã—à–∞–ª! üôÉ",
        "–û–∫–µ–π, —è –ø–æ–Ω—è–ª, —à—É—Ç–∫–∏ –Ω–µ –∑–∞—à–ª–∏. –ë—É–¥—É —Å–µ—Ä—å—ë–∑–Ω–µ–µ! ü§∑‚Äç‚ôÇÔ∏è",
        "–°–ø–∞—Å–∏–±–æ –∑–∞ –∫—Ä–∏—Ç–∏–∫—É, –±—Ä–æ/—Å–∏—Å—Ç–µ—Ä—Å! –Ø —É—á—Ç—É –∏ –∑–∞–ø–æ–º–Ω—é!",
        "–ù—É —Ç—ã –º–µ–Ω—è —Ä–∞—Å—Å—Ç—Ä–æ–∏–ª... –ù–æ –≤—Å—ë —Ä–∞–≤–Ω–æ —Å–ø–∞—Å–∏–±–æ! üôå"
    ];

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ "–î–∞"
    $('#feedback-yesBtn').on('click', function () {
        sendFeedback(postId, 'yes');
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ "–ù–µ—Ç"
    $('feedback-#noBtn').on('click', function () {
        sendFeedback(postId, 'no');
    });

    // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    function sendFeedback(postId, feedback) {
        $.ajax({
            url: feedbackData.ajax_url,
            type: 'POST',
            data: {
                action: 'save_feedback',
                post_id: postId,
                feedback: feedback
            },
            success: function (response) {
                if (response.success) {
                    // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—Ç–≤–µ—Ç–∞
                    const randomMessage = feedback === 'yes'
                        ? yesMessages[Math.floor(Math.random() * yesMessages.length)]
                        : noMessages[Math.floor(Math.random() * noMessages.length)];

                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                    $('#feedback-message').text(randomMessage);
                    $('#feedback-yesBtn').hide();
                    $('#feedback-noBtn').hide();
                    $('#feedback-title').hide();
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + response.data);
                }
            },
            error: function () {
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
            }
        });
    }
});